<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="author" content="Laurent Laville" />
<title>PEAR/HTML/Progress-Class Examples: ITDynamic Monitor & User-Callback</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="examples.css" />
</head>
<body>

<a name="top">

<p><a href="index.html"><img src="images/home.gif" alt="Examples TOC"/>examples TOC</a></p>

<h1><span class="chapter">ITDynamic Monitor & User-Callback</span></h1>

<p align="right">$Date$</p>

<div class="toc">&nbsp;Table of contents </div>
<ul>
<li><a href="#intro">Introduction<a>
<li><a href="#script">PHP script<a>
<li><a href="#render">Render options<a>
<li><a href="#output">Output</a>
<li><a href="#run">Play full example<a>
</ul>


<a name="intro">
<h2><img src="images/info.gif"/> Introduction</h2>
		
<p>This example will run a template style ProgressBar Monitor, 
handled by class-method user callback. 
Used ITDynamic QuickForm renderer with a non-standard color scheme
for form template and progress bar.</p>
	
<p>[<a href="#top">Top</a>]</p>


<a name="script">
<h2><img src="images/source.gif"/>&nbsp;PHP script</h2>

<p>User-Callback</p>
<pre>
<font color="#000000">
<font color="#0000BB">&lt;?php

</font><font color="#007700">class </font><font color="#0000BB">my2ClassHandler
</font><font color="#007700">{
&nbsp;&nbsp;&nbsp;&nbsp;function </font><font color="#0000BB">my1Method</font><font color="#007700">(</font><font color="#0000BB">$progressValue</font><font color="#007700">, &amp;</font><font color="#0000BB">$obj</font><font color="#007700">)
&nbsp;&nbsp;&nbsp;&nbsp;{
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;switch (</font><font color="#0000BB">$progressValue</font><font color="#007700">) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font color="#0000BB">10</font><font color="#007700">:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$pic </font><font color="#007700">= </font><font color="#DD0000">'picture1.jpg'</font><font color="#007700">;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font color="#0000BB">45</font><font color="#007700">:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$pic </font><font color="#007700">= </font><font color="#DD0000">'picture2.jpg'</font><font color="#007700">;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;case </font><font color="#0000BB">70</font><font color="#007700">:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$pic </font><font color="#007700">= </font><font color="#DD0000">'picture3.jpg'</font><font color="#007700">;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$pic </font><font color="#007700">= </font><font color="#0000BB">null</font><font color="#007700">;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if (!</font><font color="#0000BB">is_null</font><font color="#007700">(</font><font color="#0000BB">$pic</font><font color="#007700">)) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$obj</font><font color="#007700">-&gt;</font><font color="#0000BB">setCaption</font><font color="#007700">(</font><font color="#DD0000">'upload &lt;b&gt;%file%&lt;/b&gt; in progress ... Start at %percent%%'</font><font color="#007700">,
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;array(</font><font color="#DD0000">'file'</font><font color="#007700">=&gt;</font><font color="#0000BB">$pic</font><font color="#007700">, </font><font color="#DD0000">'percent'</font><font color="#007700">=&gt;</font><font color="#0000BB">$progressValue</font><font color="#007700">)
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;}
}
</font><font color="#0000BB">?&gt;</font>
</font>
</pre>
		
<p>[<a href="#top">Top</a>]</p>


<a name="render">
<h2><img src="images/config.gif"/>&nbsp;Render options </h2>

<p>Used a pre-set UI model: <b>Progress_ITDynamic</b> in file <i>progressModels.php</i></p>

Here are the progress attributes:
<pre>
background-color = #EEE
</pre>
<div class="fig">HTML_Progress_UI::setProgressAttributes()</div>

Here are the progress string attributes:
<pre>
color            = navy
background-color = #EEE
</pre>
<div class="fig">HTML_Progress_UI::setStringAttributes()</div>

Here are the progress cells attributes:
<pre>
inactive-color = #FFF
active-color   = #444444
</pre>
<div class="fig">HTML_Progress_UI::setCellAttributes()</div>

<p>[<a href="#top">Top</a>]</p>


<a name="output">
<h2><img src="images/image.gif"/>&nbsp;Output</h2>
		
<h3>Screenshot </h3>

<p><img src="screenshots/monitor_itdynamic.png"/></p>

<p>[<a href="#top">Top</a>]</p>
		

<a name="run">
<h2><img src="images/run.gif"/>&nbsp;Play full example</h2>

<p><a href="monitor_itdynamic.php">Run</a> the script below :</p>

<pre class="code">
<font color="#000000">
<font color="#0000BB">&lt;?php
</font><font color="#007700">require_once </font><font color="#DD0000">'HTML/Progress/monitor.php'</font><font color="#007700">;
require_once </font><font color="#DD0000">'progressModels.php'</font><font color="#007700">;
require_once </font><font color="#DD0000">'progressHandler.php'</font><font color="#007700">;
require_once </font><font color="#DD0000">'HTML/QuickForm/Renderer/ITDynamic.php'</font><font color="#007700">;
require_once </font><font color="#DD0000">'HTML/Template/ITX.php'</font><font color="#007700">;


</font><font color="#0000BB">$monitor </font><font color="#007700">= new </font><font color="#0000BB">HTML_Progress_Monitor</font><font color="#007700">(</font><font color="#DD0000">'frmMonitor5'</font><font color="#007700">, array(
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'title'&nbsp;&nbsp;</font><font color="#007700">=&gt; </font><font color="#DD0000">'Upload your pictures'</font><font color="#007700">,
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'start'&nbsp;&nbsp;</font><font color="#007700">=&gt; </font><font color="#DD0000">'Upload'</font><font color="#007700">,
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'cancel' </font><font color="#007700">=&gt; </font><font color="#DD0000">'Stop'</font><font color="#007700">,
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'button' </font><font color="#007700">=&gt; array(</font><font color="#DD0000">'style' </font><font color="#007700">=&gt; </font><font color="#DD0000">'width:80px;'</font><font color="#007700">)
&nbsp;&nbsp;&nbsp;&nbsp;)
);
</font><font color="#0000BB">$monitor</font><font color="#007700">-&gt;</font><font color="#0000BB">setProgressHandler</font><font color="#007700">(array(</font><font color="#DD0000">'my2ClassHandler'</font><font color="#007700">,</font><font color="#DD0000">'my1Method'</font><font color="#007700">));

</font><font color="#FF8000">// Attach a progress ui-model (see file progressModels.php for attributes definition)
</font><font color="#0000BB">$progress </font><font color="#007700">= new </font><font color="#0000BB">HTML_Progress</font><font color="#007700">();
</font><font color="#0000BB">$progress</font><font color="#007700">-&gt;</font><font color="#0000BB">setUI</font><font color="#007700">(</font><font color="#DD0000">'Progress_ITDynamic'</font><font color="#007700">);
</font><font color="#0000BB">$progress</font><font color="#007700">-&gt;</font><font color="#0000BB">setAnimSpeed</font><font color="#007700">(</font><font color="#0000BB">50</font><font color="#007700">);
</font><font color="#0000BB">$monitor</font><font color="#007700">-&gt;</font><font color="#0000BB">setProgressElement</font><font color="#007700">(</font><font color="#0000BB">$progress</font><font color="#007700">);

</font><font color="#FF8000">// can use either HTML_Template_Sigma or HTML_Template_ITX
</font><font color="#0000BB">$tpl </font><font color="#007700">=&amp; new </font><font color="#0000BB">HTML_Template_ITX</font><font color="#007700">(</font><font color="#DD0000">'./templates'</font><font color="#007700">);


</font><font color="#0000BB">$tpl</font><font color="#007700">-&gt;</font><font color="#0000BB">loadTemplateFile</font><font color="#007700">(</font><font color="#DD0000">'itdynamic_monitor.html'</font><font color="#007700">);

</font><font color="#0000BB">$tpl</font><font color="#007700">-&gt;</font><font color="#0000BB">setVariable</font><font color="#007700">(array(
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'qf_style'&nbsp;&nbsp;</font><font color="#007700">=&gt; </font><font color="#DD0000">"body {font-family: Verdana, Arial; } \n" </font><font color="#007700">. </font><font color="#0000BB">$monitor</font><font color="#007700">-&gt;</font><font color="#0000BB">getStyle</font><font color="#007700">(),
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'qf_script' </font><font color="#007700">=&gt; </font><font color="#0000BB">$monitor</font><font color="#007700">-&gt;</font><font color="#0000BB">getScript</font><font color="#007700">()
&nbsp;&nbsp;&nbsp;&nbsp;)
);

</font><font color="#0000BB">$renderer </font><font color="#007700">=&amp; new </font><font color="#0000BB">HTML_QuickForm_Renderer_ITDynamic</font><font color="#007700">(</font><font color="#0000BB">$tpl</font><font color="#007700">);
</font><font color="#0000BB">$renderer</font><font color="#007700">-&gt;</font><font color="#0000BB">setElementBlock</font><font color="#007700">(array(
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#DD0000">'buttons'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">=&gt; </font><font color="#DD0000">'qf_buttons'
</font><font color="#007700">));

</font><font color="#0000BB">$monitor</font><font color="#007700">-&gt;</font><font color="#0000BB">accept</font><font color="#007700">(</font><font color="#0000BB">$renderer</font><font color="#007700">);

</font><font color="#FF8000">// Display progress uploader dialog box
</font><font color="#0000BB">$tpl</font><font color="#007700">-&gt;</font><font color="#0000BB">show</font><font color="#007700">();


</font><font color="#0000BB">$monitor</font><font color="#007700">-&gt;</font><font color="#0000BB">run</font><font color="#007700">();&nbsp;&nbsp;&nbsp;
</font><font color="#0000BB">?&gt;</font>
</font>
</pre>
<div class="fig">href:&nbsp; ./monitor_itdynamic.php</div>

<p>[<a href="#top">Top</a>]</p>

</body>
</html>
