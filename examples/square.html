<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="author" content="Laurent Laville" />
<title>PEAR/HTML/Progress-Class Examples: Square</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" href="examples.css" />
</head>
<body>

<a name="top">

<p><a href="index.html"><img src="images/home.gif" alt="Examples TOC"/>examples TOC</a></p>

<h1><span class="chapter">Square </span></h1>

<p align="right">$Date$</p>

<div class="toc">&nbsp;Table of contents </div>
<ul>
<li><a href="#intro">Introduction<a>
<li><a href="#script">PHP script<a>
<li><a href="#render">Render options<a>
<li><a href="#output">Output</a>
<li><a href="#run">Play full example<a>
</ul>


<a name="intro">
<h2><img src="images/info.gif"/> Introduction</h2>
		
<p>This example will run a polygonal (square 3x3) ProgressBar.</p>
<p>Cell coordinates are pre-computed but free x-y-grid coordinates are also possible.
Percent text info is centered on a white background area of 30 pixels width,
at top side of polygonal shape.</p>
	
<p>[<a href="#top">Top</a>]</p>


<a name="script">
<h2><img src="images/source.gif"/>&nbsp;PHP script</h2>

<p>Build the progress bar</p>
<pre>
<font color="#007700">require_once </font><font color="#DD0000">'HTML/Progress.php'</font><font color="#007700">;

</font><font color="#0000BB">$s </font><font color="#007700">= isset(</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'start'</font><font color="#007700">]) ? </font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'start'</font><font color="#007700">] : </font><font color="#DD0000">'topleft'</font><font color="#007700">;

</font><font color="#0000BB">$bar </font><font color="#007700">= new </font><font color="#0000BB">HTML_Progress</font><font color="#007700">();
</font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">setAnimSpeed</font><font color="#007700">(</font><font color="#0000BB">100</font><font color="#007700">);
</font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">setIncrement</font><font color="#007700">(</font><font color="#0000BB">10</font><font color="#007700">);

</font><font color="#0000BB">$ui </font><font color="#007700">=&amp; </font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">getUI</font><font color="#007700">();
</font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">setStringAttributes</font><font color="#007700">(</font><font color="#DD0000">'valign=top align=center height=30'</font><font color="#007700">);
</font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">setOrientation</font><font color="#007700">(</font><font color="#0000BB">HTML_PROGRESS_POLYGONAL</font><font color="#007700">);
</font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">setCellAttributes</font><font color="#007700">(</font><font color="#DD0000">'width=20 height=20'</font><font color="#007700">);
</font><font color="#0000BB">$w </font><font color="#007700">= </font><font color="#0000BB">3</font><font color="#007700">;
</font><font color="#0000BB">$h </font><font color="#007700">= </font><font color="#0000BB">3</font><font color="#007700">;
</font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">setCellCoordinates</font><font color="#007700">(</font><font color="#0000BB">$w</font><font color="#007700">,</font><font color="#0000BB">$h</font><font color="#007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">// square 3x3
</font>
</pre>

<p>Rotates the cell coordinates array, to allow different start point.</p>
<pre>
<font color="#0000BB">$coord </font><font color="#007700">= </font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">getCellCoordinates</font><font color="#007700">();

switch (</font><font color="#0000BB">strtolower</font><font color="#007700">(</font><font color="#0000BB">$s</font><font color="#007700">)) {
 case </font><font color="#DD0000">'topright'</font><font color="#007700">:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (</font><font color="#0000BB">$i</font><font color="#007700">=</font><font color="#0000BB">1</font><font color="#007700">; </font><font color="#0000BB">$i</font><font color="#007700">&lt;</font><font color="#0000BB">$w</font><font color="#007700">; </font><font color="#0000BB">$i</font><font color="#007700">++) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$shift </font><font color="#007700">= </font><font color="#0000BB">array_shift</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">array_push</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">, </font><font color="#0000BB">$shift</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
 case </font><font color="#DD0000">'bottomright'</font><font color="#007700">:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (</font><font color="#0000BB">$i</font><font color="#007700">=</font><font color="#0000BB">1</font><font color="#007700">; </font><font color="#0000BB">$i</font><font color="#007700">&lt;(</font><font color="#0000BB">$w</font><font color="#007700">+</font><font color="#0000BB">$h</font><font color="#007700">-</font><font color="#0000BB">1</font><font color="#007700">); </font><font color="#0000BB">$i</font><font color="#007700">++) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$shift </font><font color="#007700">= </font><font color="#0000BB">array_shift</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">array_push</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">, </font><font color="#0000BB">$shift</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
 case </font><font color="#DD0000">'bottomleft'</font><font color="#007700">:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (</font><font color="#0000BB">$i</font><font color="#007700">=</font><font color="#0000BB">1</font><font color="#007700">; </font><font color="#0000BB">$i</font><font color="#007700">&lt;</font><font color="#0000BB">$w</font><font color="#007700">; </font><font color="#0000BB">$i</font><font color="#007700">++) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$pop </font><font color="#007700">= </font><font color="#0000BB">array_pop</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">array_unshift</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">, </font><font color="#0000BB">$pop</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
 case </font><font color="#DD0000">'topleft'</font><font color="#007700">:
 default:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
}
</font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">setCellCoordinates</font><font color="#007700">(</font><font color="#0000BB">$w</font><font color="#007700">, </font><font color="#0000BB">$h</font><font color="#007700">, </font><font color="#0000BB">$coord</font><font color="#007700">);
</font>
</pre>

<p>Loop to run the progress</p>
<pre>
<font color="#000000">
<font color="#007700">do {
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">display</font><font color="#007700">();
&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">getPercentComplete</font><font color="#007700">() == </font><font color="#0000BB">1</font><font color="#007700">) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">// the progress bar has reached 100%
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">// your user-process should be put HERE !
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">incValue</font><font color="#007700">();
} while(</font><font color="#0000BB">1</font><font color="#007700">);
</font>
</font>
</pre>
		
<p>[<a href="#top">Top</a>]</p>


<a name="render">
<h2><img src="images/config.gif"/>&nbsp;Render options </h2>

Here are options to build this progress bar string (percent text info):
<pre>
valign = top 
align  = center
height = 30
</pre>
<div class="fig">HTML_Progress_UI::setStringAttributes()</div>

Here are options to build the progress bar cells :
<pre>
width  = 20
height = 20
</pre>
<div class="fig">HTML_Progress_UI::setCellAttributes()</div>

<p>[<a href="#top">Top</a>]</p>


<a name="output">
<h2><img src="images/image.gif"/>&nbsp;Output</h2>
		
<h3>Screenshot </h3>

<p><img src="screenshots/square.png"/></p>

<p>[<a href="#top">Top</a>]</p>
		

<a name="run">
<h2><img src="images/run.gif"/>&nbsp;Play full example</h2>

<p>Run the script below to build a square 3x3 beginning at :
<ul>
<li><a href="square.php?start=topleft">top left corner</a> (default)
<li><a href="square.php?start=topright">top right corner</a>
<li><a href="square.php?start=bottomright">bottom right corner</a>
<li><a href="square.php?start=bottomleft">bottom left corner</a>
</ul>
</p>

<pre class="code">
<font color="#000000">
<font color="#0000BB">&lt;?php 
</font><font color="#007700">require_once </font><font color="#DD0000">'HTML/Progress.php'</font><font color="#007700">;

</font><font color="#0000BB">$s </font><font color="#007700">= isset(</font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'start'</font><font color="#007700">]) ? </font><font color="#0000BB">$_GET</font><font color="#007700">[</font><font color="#DD0000">'start'</font><font color="#007700">] : </font><font color="#DD0000">'topleft'</font><font color="#007700">;

</font><font color="#0000BB">$bar </font><font color="#007700">= new </font><font color="#0000BB">HTML_Progress</font><font color="#007700">();
</font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">setAnimSpeed</font><font color="#007700">(</font><font color="#0000BB">100</font><font color="#007700">);
</font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">setIncrement</font><font color="#007700">(</font><font color="#0000BB">10</font><font color="#007700">);

</font><font color="#0000BB">$ui </font><font color="#007700">=&amp; </font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">getUI</font><font color="#007700">();
</font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">setStringAttributes</font><font color="#007700">(</font><font color="#DD0000">'valign=top align=center height=30'</font><font color="#007700">);
</font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">setOrientation</font><font color="#007700">(</font><font color="#0000BB">HTML_PROGRESS_POLYGONAL</font><font color="#007700">);
</font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">setCellAttributes</font><font color="#007700">(</font><font color="#DD0000">'width=20 height=20'</font><font color="#007700">);
</font><font color="#0000BB">$w </font><font color="#007700">= </font><font color="#0000BB">3</font><font color="#007700">;
</font><font color="#0000BB">$h </font><font color="#007700">= </font><font color="#0000BB">3</font><font color="#007700">;
</font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">setCellCoordinates</font><font color="#007700">(</font><font color="#0000BB">$w</font><font color="#007700">,</font><font color="#0000BB">$h</font><font color="#007700">);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">// square 3x3
</font><font color="#0000BB">$coord </font><font color="#007700">= </font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">getCellCoordinates</font><font color="#007700">();

switch (</font><font color="#0000BB">strtolower</font><font color="#007700">(</font><font color="#0000BB">$s</font><font color="#007700">)) {
 case </font><font color="#DD0000">'topright'</font><font color="#007700">:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (</font><font color="#0000BB">$i</font><font color="#007700">=</font><font color="#0000BB">1</font><font color="#007700">; </font><font color="#0000BB">$i</font><font color="#007700">&lt;</font><font color="#0000BB">$w</font><font color="#007700">; </font><font color="#0000BB">$i</font><font color="#007700">++) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$shift </font><font color="#007700">= </font><font color="#0000BB">array_shift</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">array_push</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">, </font><font color="#0000BB">$shift</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
 case </font><font color="#DD0000">'bottomright'</font><font color="#007700">:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (</font><font color="#0000BB">$i</font><font color="#007700">=</font><font color="#0000BB">1</font><font color="#007700">; </font><font color="#0000BB">$i</font><font color="#007700">&lt;(</font><font color="#0000BB">$w</font><font color="#007700">+</font><font color="#0000BB">$h</font><font color="#007700">-</font><font color="#0000BB">1</font><font color="#007700">); </font><font color="#0000BB">$i</font><font color="#007700">++) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$shift </font><font color="#007700">= </font><font color="#0000BB">array_shift</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">array_push</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">, </font><font color="#0000BB">$shift</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
 case </font><font color="#DD0000">'bottomleft'</font><font color="#007700">:
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for (</font><font color="#0000BB">$i</font><font color="#007700">=</font><font color="#0000BB">1</font><font color="#007700">; </font><font color="#0000BB">$i</font><font color="#007700">&lt;</font><font color="#0000BB">$w</font><font color="#007700">; </font><font color="#0000BB">$i</font><font color="#007700">++) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$pop </font><font color="#007700">= </font><font color="#0000BB">array_pop</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">array_unshift</font><font color="#007700">(</font><font color="#0000BB">$coord</font><font color="#007700">, </font><font color="#0000BB">$pop</font><font color="#007700">);
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
 case </font><font color="#DD0000">'topleft'</font><font color="#007700">:
 default:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
}
</font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">setCellCoordinates</font><font color="#007700">(</font><font color="#0000BB">$w</font><font color="#007700">, </font><font color="#0000BB">$h</font><font color="#007700">, </font><font color="#0000BB">$coord</font><font color="#007700">);
</font><font color="#0000BB">?&gt;</font>
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;Basic Square ProgressBar example&lt;/title&gt;
&lt;style type="text/css"&gt;
&lt;!--
<font color="#0000BB">&lt;?php </font><font color="#007700">echo </font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">getStyle</font><font color="#007700">(); </font><font color="#0000BB">?&gt;
</font>// --&gt;
&lt;/style&gt;
&lt;script type="text/javascript"&gt;
&lt;!--
<font color="#0000BB">&lt;?php </font><font color="#007700">echo </font><font color="#0000BB">$ui</font><font color="#007700">-&gt;</font><font color="#0000BB">getScript</font><font color="#007700">(); </font><font color="#0000BB">?&gt;
</font>//--&gt;
&lt;/script&gt;
&lt;/head&gt;
&lt;body&gt;

<font color="#0000BB">&lt;?php 
</font><font color="#007700">echo </font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">toHtml</font><font color="#007700">(); 

do {
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">display</font><font color="#007700">();
&nbsp;&nbsp;&nbsp;&nbsp;if (</font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">getPercentComplete</font><font color="#007700">() == </font><font color="#0000BB">1</font><font color="#007700">) {
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&nbsp;&nbsp;&nbsp;</font><font color="#FF8000">// the progress bar has reached 100%
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#007700">}
&nbsp;&nbsp;&nbsp;&nbsp;</font><font color="#0000BB">$bar</font><font color="#007700">-&gt;</font><font color="#0000BB">incValue</font><font color="#007700">();
} while(</font><font color="#0000BB">1</font><font color="#007700">);

</font><font color="#0000BB">?&gt;
</font>
&lt;/body&gt;
&lt;/html&gt;</font>
</pre>
<div class="fig">href:&nbsp; ./square.php</div>

<p>[<a href="#top">Top</a>]</p>

</body>
</html>
